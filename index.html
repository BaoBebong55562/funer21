<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CHẲN LẺ VUI VẺ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"></link>
    <style>
        .firework {
            position: absolute;
            width: 5px;
            height: 5px;
            background: rgb(16, 16, 16);
            border-radius: 50%;
            animation: explode 1s ease-out forwards;
        }

        @keyframes explode {
            0% {
                transform: scale(1);
                opacity: 1;
            }
            100% {
                transform: scale(3);
                opacity: 0;
            }
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">
    <marquee class="text-gray-800 text-lg my-4">CHÀO MỪNG BẠN ĐẾN VỚI CHẲN LẺ VUI VẺ</marquee>

    <div class="container mx-auto p-4">
        <h1 class="text-2xl font-bold text-center mb-4">CHÀO MỪNG BẠN ĐẾN VỚI TRÒ CHƠI CHẲN LẺ</h1>

        <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
            <h2 class="text-xl font-bold text-yellow-600 mb-4">CÁCH CHƠI & QUY TẮC</h2>
            <h3 class="mb-2">- Số điểm đặt cược >= 5.000 điểm</h3>
            <h3 class="mb-2">- Trả thưởng trên "tổng tiền đặt cược x1.75" => số tiền bạn thắng. Ngược lại, nếu thua sẽ bị trừ số tiền đặt cược tương ứng.</h3>
            <h3 class="mb-2">- Mỗi giao dịch với admin sẽ được duy nhất 1 mã (tùy theo số tiền bạn giao dịch) mã chỉ có hiệu lực 1 lần nên không được load trang sau khi nhập mã "tránh trường hợp gian lận".</h3>
            <h3 class="mb-2">- Có chức năng rút điểm bằng cách chụp lại lịch sử giao đặt cược cuối cùng gửi qua "telegram" cho admin để kiểm tra và hoàn lại điểm tương ứng với tiền cho bạn.</h3>
            <h4>Vui lòng liên hệ admin để nhận mã nạp điểm: <a href="https://t.me/tomxinh917" target="_blank" class="text-blue-500">https://t.me/tomxinh917</a></h4>
        </div>
  <!-- Hướng dẫn nạp tiền -->
  <h2>CÁC MỆNH GIÁ NHẬN TIỀN</h2>
  <table border="1" cellpadding="10" cellspacing="0" style="margin: 20px auto; width: 50%; border-radius: 10px; text-align: center; background-color: #eceff1;">
    <thead>
      <tr>
        <th style="color: rgb(209, 15, 15);">Số thứ tự</th>
        <th style="color: rgb(208, 14, 14);">Mệnh giá (VNĐ)</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td style="color: black;">1</td>
        <td style="color: rgba(249, 0, 0, 0.623);">20.000 VNĐ = 20.000 điểm</td>
      </tr>
      <tr>
        <td style="color: black;">2</td>
        <td style="color: rgb(19, 223, 12);">30.000 VNĐ = 30.000 điểm</td>
      </tr>
      <tr>
        <td style="color: black;">3</td>
        <td style="color: rgb(197, 14, 210);">50.000 VNĐ = 50.000 điểm</td>
      </tr>
      <tr>
        <td style="color: black;">4</td>
        <td style="color: rgb(255, 0, 0);">100.000 VNĐ = 100.000 điểm</td>
      </tr>
    </tbody>
  </table>
        <div class="mb-6">
            <h3 class="text-lg font-semibold mb-2">Tạo ID Người Chơi</h3>
            <input type="text" id="player-id" placeholder="Nhập ID người chơi (10 chữ số)" class="border p-2 w-full mb-2" maxlength="10" oninput="validatePlayerId()">
            <button class="bg-blue-600 text-white px-4 py-2 rounded" onclick="createPlayerId()">Tạo ID</button>
            <div id="player-id-message" class="mt-2"></div>
        </div>

        <div id="wallet-info" class="hidden mb-6">
            <h3 class="text-lg font-semibold mb-2">Số dư ví: <span id="wallet-balance">0</span> VNĐ</h3>
            <h3 class="text-lg font-semibold mb-2">Số dư hiện tại: <span id="current-balance">0</span> điểm</h3>
        </div>

        <div class="mb-6">
            <h3 class="text-lg font-semibold mb-2">Nạp điểm</h3>
            <input type="text" id="deposit-code" placeholder="Nhập mã giao dịch" class="border p-2 w-full mb-2" disabled>
            <button class="bg-yellow-600 text-white px-4 py-2 rounded" onclick="validateDeposit()" disabled>Nạp điểm</button>
            <div id="deposit-message" class="mt-2"></div>
        </div>

        <h3 class="text-lg font-semibold mb-2">Lịch sử nạp điểm</h3>
        <table id="deposit-history" class="min-w-full bg-white rounded-lg shadow-lg mb-6">
            <thead>
                <tr class="bg-yellow-600 text-white">
                    <th class="py-2">Số thứ tự</th>
                    <th class="py-2">Mã giao dịch</th>
                    <th class="py-2">Số điểm nạp</th>
                    <th class="py-2">Thời gian</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>

        <h3 class="text-lg font-semibold mb-2">Đặt cược</h3>
        <div class="mb-6">
            <input type="text" id="bet-id" placeholder="Nhập ID đặt cược" class="border p-2 w-full mb-2" disabled>
            <input type="number" id="bet-amount" placeholder="Nhập số điểm cược" class="border p-2 w-full mb-2" disabled>
            <div class="flex justify-center mb-2">
                <button id="even-button" class="bg-gray-200 text-gray-800 px-4 py-2 rounded-l" onclick="selectBetType('even')" disabled>Chẵn</button>
                <button id="odd-button" class="bg-gray-200 text-gray-800 px-4 py-2 rounded-r" onclick="selectBetType('odd')" disabled>Lẻ</button>
            </div>
            <button class="bg-green-600 text-white px-4 py-2 rounded" onclick="placeBet()" disabled>Đặt cược</button>
        </div>

        <div id="spin-result" class="text-center text-2xl font-bold mb-6"></div>

        <h3 class="text-lg font-semibold mb-2">Lịch sử đặt cược</h3>
        <table id="bet-history" class="min-w-full bg-white rounded-lg shadow-lg mb-6">
            <thead>
                <tr class="bg-yellow-600 text-white">
                    <th class="py-2">Số thứ tự</th>
                    <th class="py-2">ID Đặt Cược</th>
                    <th class="py-2">Số điểm cược</th>
                    <th class="py-2">Kết quả</th>
                    <th class="py-2">Thực nhận</th>
                    <th class="py-2">Thời gian</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>

        <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
            <h3 class="text-lg font-semibold mb-2">Rút điểm</h3>
            <input type="number" id="withdraw-amount" placeholder="Nhập số điểm cần rút" class="border p-2 w-full mb-2" disabled>
            <button class="bg-red-600 text-white px-4 py-2 rounded" onclick="withdrawPoints()" disabled>Rút điểm</button>
            <div id="withdraw-message" class="mt-2"></div>
        </div>

        <h3 class="text-lg font-semibold mb-2">Lịch sử rút điểm</h3>
        <table id="withdraw-history" class="min-w-full bg-white rounded-lg shadow-lg mb-6">
            <thead>
                <tr class="bg-yellow-600 text-white">
                    <th class="py-2">Số thứ tự</th>
                    <th class="py-2">Số điểm rút</th>
                    <th class="py-2">Thời gian</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <script>
        let currentBalance = 0;
        let transactionCounter = 0;
        let betCounter = 0;
        let playerId = '';
        let selectedBetType = '';

        // Mã giao dịch hợp lệ
        const validDepositCodes = {
            "ABC123": 20000,
            "XYZ456": 50000,
            "LMN789": 30000,
            "BAOVIP": 100000,
        };

        // Dữ liệu người chơi
        const playerData = {};

        // Hiển thị số dư
        const balanceElement = document.getElementById("current-balance");
        const walletBalanceElement = document.getElementById("wallet-balance");

        // Tạo ID người chơi
        function createPlayerId() {
            playerId = document.getElementById("player-id").value.trim();
            if (/^\d{10}$/.test(playerId)) {
                if (!playerData[playerId]) {
                    playerData[playerId] = 0; // Khởi tạo số dư cho người chơi mới
                }
                currentBalance = playerData[playerId];
                balanceElement.textContent = currentBalance;
                walletBalanceElement.textContent = "0"; // Hiển thị số dư ví là 0 VNĐ
                document.getElementById("player-id-message").textContent = "Đã tạo ID thành công, chúc bạn chơi vui vẻ!";
                document.getElementById("wallet-info").classList.remove("hidden");
                enableGameFeatures();
            } else {
                alert("Vui lòng nhập ID người chơi hợp lệ (10 chữ số)!");
            }
        }

        // Kích hoạt các tính năng trò chơi
        function enableGameFeatures() {
            document.getElementById("deposit-code").disabled = false;
            document.querySelector("button[onclick='validateDeposit()']").disabled = false;
            document.getElementById("bet-id").disabled = false;
            document.getElementById("bet-amount").disabled = false;
            document.getElementById("even-button").disabled = false;
            document.getElementById("odd-button").disabled = false;
            document.querySelector("button[onclick='placeBet()']").disabled = false;
            document.getElementById("withdraw-amount").disabled = false;
            document.querySelector("button[onclick='withdrawPoints()']").disabled = false;
        }

        // Thêm vào bảng lịch sử giao dịch
        function updateDepositHistory(code, amount) {
            const table = document.getElementById("deposit-history").getElementsByTagName('tbody')[0];
            const newRow = table.insertRow(-1);
            transactionCounter++;

            const cell1 = newRow.insertCell(0);
            const cell2 = newRow.insertCell(1);
            const cell3 = newRow.insertCell(2);
            const cell4 = newRow.insertCell(3);

            cell1.textContent = transactionCounter;
            cell2.textContent = code;
            cell3.textContent = amount;
            cell4.textContent = new Date().toLocaleString();

            // Áp dụng màu ngẫu nhiên cho hàng mới
            applyRandomBackgroundColor(newRow);
        }

        // Xử lý nạp điểm
        function validateDeposit() {
            const code = document.getElementById("deposit-code").value.trim().toUpperCase();
            if (validDepositCodes[code]) {
                const amount = validDepositCodes[code];
                currentBalance += amount;
                playerData[playerId] = currentBalance; // Cập nhật số dư người chơi
                balanceElement.textContent = currentBalance; // Cập nhật số dư hiện tại
                // Số dư ví không thay đổi

                // Cập nhật lịch sử
                updateDepositHistory(code, amount);

                // Xóa mã đã sử dụng
                delete validDepositCodes[code];

                // Hiển thị thông báo
                alert(`Nạp thành công ${amount} điểm!`);
            } else {
                alert("Mã giao dịch không hợp lệ hoặc đã được sử dụng!");
            }
        }

        // Thêm vào bảng lịch sử đặt cược
        function updateBetHistory(betId, amount, result, winnings, timestamp) {
            const table = document.getElementById("bet-history").getElementsByTagName('tbody')[0];
            const newRow = table.insertRow(-1);
            betCounter++;

            const cell1 = newRow.insertCell(0);
            const cell2 = newRow.insertCell(1);
            const cell3 = newRow.insertCell(2);
            const cell4 = newRow.insertCell(3);
            const cell5 = newRow.insertCell(4);
            const cell6 = newRow.insertCell(5);

            cell1.textContent = betCounter;
            cell2.textContent = betId;
            cell3.textContent = amount;
            cell4.textContent = result;
            cell5.textContent = winnings;
            cell6.textContent = timestamp;

            // Áp dụng màu ngẫu nhiên cho hàng mới
            applyRandomBackgroundColor(newRow);
        }

        // Xử lý đặt cược
        function placeBet() {
            const betAmount = parseInt(document.getElementById("bet-amount").value);
            const betId = document.getElementById("bet-id").value.trim();

            if (isNaN(betAmount) || betAmount < 5000 || betAmount > 50000) {
                alert("Số tiền cược phải nằm trong khoảng 5.000 - 50.000 điểm!");
                return;
            }
            if (currentBalance < betAmount) {
                alert("Bạn không đủ điểm để đặt cược!");
                return;
            }
            if (!selectedBetType) {
                alert("Vui lòng chọn loại cược (Chẵn hoặc Lẻ)!");
                return;
            }

            currentBalance -= betAmount;

            const spinResult = Math.floor(Math.random() * 10); // Tạo số ngẫu nhiên từ 0-9
            const resultType = spinResult % 2 === 0 ? "Chẵn" : "Lẻ";
            const isWin = selectedBetType === (resultType === "Chẵn" ? "even" : "odd");

            let winnings = 0;
            if (isWin) {
                winnings = Math.floor(betAmount * 1.75);
                currentBalance += winnings;
                triggerFireworks();
            }

            playerData[playerId] = currentBalance; // Cập nhật số dư người chơi
            balanceElement.textContent = currentBalance; // Cập nhật số dư hiện tại
            // Số dư ví không thay đổi

            // Cập nhật lịch sử đặt cược
            updateBetHistory(
                betId,
                betAmount,
                `${spinResult} (${resultType})`,
                isWin ? winnings : -betAmount,
                new Date().toLocaleString()
            );

            // Hiển thị kết quả
            document.getElementById("spin-result").textContent = `Kết quả: ${spinResult}`;
            alert(isWin ? `Bạn đã thắng! Nhận được ${winnings} điểm.` : `Bạn đã thua! Mất ${betAmount} điểm.`);
        }

        // Chọn loại cược
        function selectBetType(type) {
            selectedBetType = type;
            document.getElementById("even-button").classList.toggle("bg-gray-200", type !== "even");
            document.getElementById("even-button").classList.toggle("bg-green-600", type === "even");
            document.getElementById("even-button").classList.toggle("text-white", type === "even");
            document.getElementById("odd-button").classList.toggle("bg-gray-200", type !== "odd");
            document.getElementById("odd-button").classList.toggle("bg-green-600", type === "odd");
            document.getElementById("odd-button").classList.toggle("text-white", type === "odd");
        }

        // Hàm tạo màu ngẫu nhiên
        function getRandomColor() {
            const letters = "0123456789ABCDEF";
            let color = "#";
            for (let i = 0; i < 6; i++) {
                color += letters[Math.floor(Math.random() * 16)];
            }
            return color;
        }

        // Hàm áp dụng màu ngẫu nhiên
        function applyRandomBackgroundColor(row) {
            row.style.backgroundColor = getRandomColor();
            row.style.color = "#fff"; // Màu chữ trắng để dễ nhìn
        }

        // Xử lý rút điểm
        function withdrawPoints() {
            const withdrawAmount = parseInt(document.getElementById("withdraw-amount").value);

            // Kiểm tra số tiền rút có hợp lệ không
            if (isNaN(withdrawAmount) || withdrawAmount < 20000) {
                alert("Số điểm rút phải tối thiểu 20.000!");
                return;
            }

            // Kiểm tra số dư tài khoản
            if (currentBalance < withdrawAmount) {
                alert("Bạn không đủ điểm để rút!");
                return;
            }

            // Trừ số điểm rút khỏi số dư
            currentBalance -= withdrawAmount;
            playerData[playerId] = currentBalance; // Cập nhật số dư người chơi
            balanceElement.textContent = currentBalance; // Cập nhật số dư hiện tại
            // Cập nhật số dư ví
            const walletBalance = parseInt(document.getElementById("wallet-balance").textContent) + withdrawAmount;
            walletBalanceElement.textContent = walletBalance + " VNĐ"; // Cập nhật số dư ví

            // Cập nhật lịch sử rút điểm
            updateWithdrawHistory(withdrawAmount, new Date().toLocaleString());

            alert(`Rút thành công ${withdrawAmount} điểm! Vui lòng chờ admin xử lý.`);
        }

        // Thêm vào bảng lịch sử rút điểm
        function updateWithdrawHistory(amount, timestamp) {
            const table = document.getElementById("withdraw-history").getElementsByTagName('tbody')[0];
            const newRow = table.insertRow(-1);

            // Tạo các ô trong hàng mới
            const cell1 = newRow.insertCell(0);
            const cell2 = newRow.insertCell(1);
            const cell3 = newRow.insertCell(2);

            // Điền nội dung vào các ô
            cell1.textContent = table.rows.length; // Số thứ tự
            cell2.textContent = amount;
            cell3.textContent = timestamp;

            // Áp dụng màu nền ngẫu nhiên cho hàng mới
            applyRandomBackgroundColor(newRow);
        }

        // Hiệu ứng pháo hoa
        function triggerFireworks() {
            for (let i = 0; i < 20; i++) {
                const firework = document.createElement("div");
                firework.classList.add("firework");
                firework.style.left = `${Math.random() * window.innerWidth}px`;
                firework.style.top = `${Math.random() * window.innerHeight}px`;
                document.body.appendChild(firework);

                setTimeout(() => {
                    firework.remove();
                }, 1000);
            }
        }

        // Xác thực ID người chơi chỉ cho phép nhập số
        function validatePlayerId() {
            const input = document.getElementById("player-id");
            input.value = input.value.replace(/\D/g, '');
        }
    </script>
</body>
</html>
